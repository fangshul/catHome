(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Issue_findcat/Issue_findcat"],{"2f52":function(e,t,n){},"3d33":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n("8328")),a=l(n("a3dd")),i=l(n("25d9"));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){Promise.all([n.e("common/vendor"),n.e("components/lb-picker/index")]).then(function(){return resolve(n("c965"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/venus-form/v-form").then(function(){return resolve(n("b24d"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/robby-image-upload/robby-image-upload").then(function(){return resolve(n("d83b"))}.bind(null,n)).catch(n.oe)},d=wx.cloud.database(),u=d.collection("findCat"),p={data:function(){return{loadingText:"",ifloading:!1,value2:"",nowdate:"",nowtime:"",cattype:"",lostdate:"",losttime:"",label2:"选择所在城市",list1:a.default,imageData:[],catlist:"",citydata:"",detailLocation:"",formDefinition:{fields:[{label:"昵称",name:"name",type:"input",inputType:"text",password:!1,placeholder:"宠物昵称(限5个字)",disabled:!1,maxLength:5},{label:"年龄",name:"age",type:"input",inputType:"number",password:!1,placeholder:"请填写宠物年龄",disabled:!1,maxLength:10},{label:"性别",name:"sex",type:"radio",options:[{label:"女孩",value:1},{label:"男孩",value:2}]},{label:"宠物描述",name:"sorry",type:"input",inputType:"textarea",password:!1,placeholder:"请输入宠物描述...",disabled:!1,maxLength:-1}],showSubmitBtn:!1,showResetBtn:!1},catInfo:{name:"",age:"",sex:1,sorry:""},peopleInfo:{peoplename:"",peoplephone:"",peoplewechat:"",disphone:!1},formPeople:{fields:[{label:"姓名",name:"peoplename",type:"input",inputType:"text",password:!1,placeholder:"请输入您的姓名",disabled:!1,maxLength:5},{label:"手机号",name:"peoplephone",type:"input",inputType:"number",password:!1,placeholder:"请输入您的手机号",disabled:!1,maxLength:11},{label:"微信",name:"peoplewechat",type:"input",inputType:"text",password:!1,placeholder:"请输入您的微信",disabled:!1,maxLength:-1},{label:"是否显示电话号码",name:"disphone",type:"switch"}]},imgs:[],tmpimgdata:[],masterImg:""}},components:{robbyImageUpload:r,VForm:c,LbPicker:s},onShow:function(){this.getnowTime(),this.lostdate=this.nowdate,this.losttime=this.nowtime,this.catlist=i.default.slice(1),console.log("catdata",this.catlist);var t=this;d.collection("user").where({_openid:e.getStorageSync("openid")}).get().then((function(e){console.log(e.data[0].avatarUrl),t.masterImg=e.data[0].avatarUrl}))},mounted:function(){},methods:{getnowTime:function(){var e=new Date;this.nowdate="".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()),this.nowtime="".concat(e.getHours(),":").concat(e.getMinutes())},updateImg:function(e){var t=this;e.currentImages.forEach((function(e){wx.cloud.uploadFile({cloudPath:"findCat/"+(0,o.default)()+".png",filePath:e}).then((function(e){console.log("fileid",e),t.tmpimgdata.push(e.fileID)}))})),console.log(e.currentImages.length)},deleteimg:function(e){console.log("delete",e);var t=this.tmpimgdata[e.imgindex];console.log(t);var n=[];n.push(t),this.tmpimgdata.splice(e.imgindex,1),wx.cloud.deleteFile({fileList:n}).then((function(e){console.log(e)}))},getData:function(){var t=this,n=this.$refs.catinfo.data,o=this.$refs.peopleinfo.data;0==this.tmpimgdata.length?this.$refs["toast"].open({type:"warning",message:"请上传猫咪图片",position:"middle",icon:"warning"}):""==this.cattype?this.$refs["toast"].open({type:"warning",message:"请选择猫咪种类",position:"middle",icon:"warning"}):""==n.name||""==n.age||""==n.sorry?this.$refs["toast"].open({type:"warning",message:"请填写猫咪的信息",position:"middle",icon:"warning"}):(this.detailLocation=void 0==this.value2||""==this.value2)?this.$refs["toast"].open({type:"warning",message:"请填写位置信息",position:"middle",icon:"warning"}):""==o.peoplename||""==o.peoplephone||""==o.peoplewechat?this.$refs["toast"].open({type:"warning",message:"请填写送养人信息",position:"middle",icon:"warning"}):o.peoplephone.length<11?this.$refs["toast"].open({type:"warning",message:"请填写正确的手机号码",position:"middle",icon:"warning"}):(this.ifloading=!0,u.add({data:{masterImg:this.masterImg,imgList:this.tmpimgdata,date:new Date,lostLocation:this.value2,lostdetailLocation:this.detailLocation,lostDate:this.lostdate,lostTime:this.losttime,masterName:o.peoplename,masterPhone:o.peoplephone,masterWechat:o.peoplewechat,disphone:o.disphone,petName:n.name,petAge:n.age,petType:this.cattype,petSex:n.sex,story:n.sorry,iffind:!1},success:function(n){t.ifloading=!1,t.$refs["toast"].open({type:"success",message:"发布成功",position:"middle",icon:"success"}),e.reLaunch({url:"../FindCat/FindCat"})},fail:function(e){t.ifloading=!1,t.$refs["toast"].open({type:"error",message:"发布失败",position:"middle",icon:"error"}),console.log(e)}}))},sexChange:function(e){this.sexindex=e.detail.value},handleSubmit:function(e){console.log(e)},handleTap:function(e){this.$refs[e].show()},handleChange:function(e){console.log("change::",e)},handleConfirm:function(e){if(console.log("confirm::",e),e){var t=e.dataset.name,n=e.item.map((function(e){return e.label})).join("-");t&&n&&(this[t]=n)}},handleCancel:function(e){console.log("cancel::",e)},TimeChange:function(e){this.losttime=e.detail.value},DateChange:function(e){this.lostdate=e.detail.value}}};t.default=p}).call(this,n("543d")["default"])},"42bc":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={robbyImageUpload:function(){return n.e("components/robby-image-upload/robby-image-upload").then(n.bind(null,"d83b"))},clFilterBar:function(){return Promise.all([n.e("common/vendor"),n.e("cl-uni/components/cl-filter-bar/cl-filter-bar")]).then(n.bind(null,"b16e"))},clFilterItem:function(){return Promise.all([n.e("common/vendor"),n.e("cl-uni/components/cl-filter-item/cl-filter-item")]).then(n.bind(null,"89c3"))},clTextarea:function(){return Promise.all([n.e("common/vendor"),n.e("cl-uni/components/cl-textarea/cl-textarea")]).then(n.bind(null,"6391"))},clToast:function(){return Promise.all([n.e("common/vendor"),n.e("cl-uni/components/cl-toast/cl-toast")]).then(n.bind(null,"e69c"))},clLoadingMask:function(){return n.e("cl-uni/components/cl-loading-mask/cl-loading-mask").then(n.bind(null,"f1a3"))}},a=function(){var e=this,t=e.$createElement;e._self._c},i=[]},"828e":function(e,t,n){"use strict";(function(e){n("8df7");o(n("66fd"));var t=o(n("9e74"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"9e74":function(e,t,n){"use strict";n.r(t);var o=n("42bc"),a=n("fdc0");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("cacd");var l,s=n("f0c5"),c=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"59220579",null,!1,o["a"],l);t["default"]=c.exports},cacd:function(e,t,n){"use strict";var o=n("2f52"),a=n.n(o);a.a},fdc0:function(e,t,n){"use strict";n.r(t);var o=n("3d33"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a}},[["828e","common/runtime","common/vendor"]]]);