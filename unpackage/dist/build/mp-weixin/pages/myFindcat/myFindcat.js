(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myFindcat/myFindcat"],{7425:function(n,e,t){"use strict";(function(n){t("8df7");o(t("66fd"));var e=o(t("d857"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},"9b1a":function(n,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return c})),t.d(e,"a",(function(){return o}));var o={uniList:function(){return t.e("components/uni-list/uni-list").then(t.bind(null,"7b53"))},uniListChat:function(){return t.e("components/uni-list-chat/uni-list-chat").then(t.bind(null,"8b53"))},clIcon:function(){return Promise.all([t.e("common/vendor"),t.e("cl-uni/components/cl-icon/cl-icon")]).then(t.bind(null,"5a7c"))},clSelect:function(){return Promise.all([t.e("common/vendor"),t.e("cl-uni/components/cl-select/cl-select")]).then(t.bind(null,"795e"))},clConfirm:function(){return t.e("cl-uni/components/cl-confirm/cl-confirm").then(t.bind(null,"a330"))},clLoadingMask:function(){return t.e("cl-uni/components/cl-loading-mask/cl-loading-mask").then(t.bind(null,"f1a3"))},clToast:function(){return Promise.all([t.e("common/vendor"),t.e("cl-uni/components/cl-toast/cl-toast")]).then(t.bind(null,"e69c"))}},i=function(){var n=this,e=n.$createElement;n._self._c},c=[]},a785:function(n,e,t){},aca2:function(n,e,t){"use strict";var o=t("a785"),i=t.n(o);i.a},d857:function(n,e,t){"use strict";t.r(e);var o=t("9b1a"),i=t("e4e2");for(var c in i)"default"!==c&&function(n){t.d(e,n,(function(){return i[n]}))}(c);t("aca2");var a,l=t("f0c5"),r=Object(l["a"])(i["default"],o["b"],o["c"],!1,null,"e2848932",null,!1,o["a"],a);e["default"]=r.exports},e4e2:function(n,e,t){"use strict";t.r(e);var o=t("fd87"),i=t.n(o);for(var c in o)"default"!==c&&function(n){t.d(e,n,(function(){return o[n]}))}(c);e["default"]=i.a},fd87:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(t("a34a"));function i(n){return n&&n.__esModule?n:{default:n}}function c(n,e,t,o,i,c,a){try{var l=n[c](a),r=l.value}catch(u){return void t(u)}l.done?e(r):Promise.resolve(r).then(o,i)}function a(n){return function(){var e=this,t=arguments;return new Promise((function(o,i){var a=n.apply(e,t);function l(n){c(a,o,i,l,r,"next",n)}function r(n){c(a,o,i,l,r,"throw",n)}l(void 0)}))}}var l=wx.cloud.database(),r=l.collection("findCat"),u=function(){t.e("components/uni-list/uni-list").then(function(){return resolve(t("7b53"))}.bind(null,t)).catch(t.oe)},s=function(){t.e("components/uni-list-item/uni-list-item").then(function(){return resolve(t("e516"))}.bind(null,t)).catch(t.oe)},d={components:{uniList:u,uniListItem:s},data:function(){return{bar:["已找到","未找到"],TabCur:0,scrollLeft:0,val:1,list:[{label:"已找到",value:1},{label:"未找到",value:2}],id:"",info:"",load:!0,typeindex:0,changeindex:""}},onLoad:function(n){console.log(n),this.id=n.id,this.getfinded()},methods:{deleteadopt:function(n){var e=this,t=this;console.log(t.info[n]._id),this.$refs["confirmdelete"].open({title:"提示",message:"确定删除该寻猫",callback:function(o){var i=o.action;"confirm"==i?(e.load=!0,r.doc(t.info[n]._id).remove({success:function(n){console.log("delete",n),t.load=!1,0==t.typeindex?t.getfinded()():t.getnotfind()()}})):console.log("can"),console.log(i)}})},open:function(){var n=this,e=this;this.$refs["confirm"].open({title:"提示",message:"确定更改寻猫状态",callback:function(t){var o=t.action;if("confirm"==o){console.log("con"),console.log(n.info[n.changeindex]._id);var i=!n.info[n.changeindex].iffind;r.doc(n.info[n.changeindex]._id).update({data:{iffind:i},success:function(n){console.log(n),console.log(i),console.log(e),e.$refs["toast"].open({message:"更改成功"}),i?(console.log("no"),e.getnotfind()()):e.getfinded()()}})}else console.log("can");console.log(o)}})},changtype:function(n,e){this.changeindex=e,console.log(n),console.log(this.info[e]),(0==this.info[e].iffind&&1==n.value||1==this.info[e].iffind&&2==n.value)&&this.open()},getfinded:function(){var n=this;return a(o.default.mark((function e(){var t;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.load=!0,e.next=3,r.orderBy("date","desc").where({_openid:n.id,iffind:!0}).get();case 3:t=e.sent,n.info=t.data,console.log(t),n.getimg();case 7:case"end":return e.stop()}}),e)})))()},getnotfind:function(){var n=this;return a(o.default.mark((function e(){var t;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.load=!0,e.next=3,r.orderBy("date","desc").where({_openid:n.id,iffind:!1}).get();case 3:t=e.sent,n.info=t.data,n.getimg(),console.log(t);case 7:case"end":return e.stop()}}),e)})))()},getimg:function(){var n=this;return a(o.default.mark((function e(){var t,i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<n.info.length)){e.next=10;break}return e.next=4,wx.cloud.downloadFile({fileID:n.info[t].imgList[0]});case 4:i=e.sent,console.log(i.tempFilePath),n.info[t].headImg=i.tempFilePath;case 7:t++,e.next=1;break;case 10:n.load=!1,n.$forceUpdate(),console.log(n.info);case 13:case"end":return e.stop()}}),e)})))()},tabSelect:function(n){this.TabCur=n.currentTarget.dataset.id,this.scrollLeft=60*(n.currentTarget.dataset.id-1),console.log(n.currentTarget.dataset.id),0===n.currentTarget.dataset.id?(this.typeindex=0,this.getfinded()):(this.typeindex=1,this.getnotfind())}}};e.default=d}},[["7425","common/runtime","common/vendor"]]]);